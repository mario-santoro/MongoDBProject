
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script src="js/jquery.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<title>Omicidi US</title>

<script type="text/javascript">

$(document).ready(function(){

	$('[class^=is]').hide();

	$("#theSelect").change(function(){          
	    var value = $("#theSelect option:selected").val();
	    var theDiv = $(".is" + value);

	    theDiv.slideDown();
	    theDiv.siblings('[class^=is]').slideUp();
	});

});

</script>

<style type="text/css">
.hidden {
    display: none;
}
</style>


</head>
<body>



	<div class="container">
		<div class="row">

			<div class="col-sm-12">
				<br>
				<h1>Analisi Omicidi US dal 1980 al 2014</h1>

				<p>Quesa pagina web permette di analizzare e visualizzare gli
					omicidi avvenuti in America (solo determinati stati) dal 1980 al
					2014.</p>
				<blockquote>
					<p>E' possibile cambiare i parametri di ricerca e filtrare i
						risultati di ricerca, che verranno mostrati infine graficamente.</p>
					<footer>UniSA</footer>
				</blockquote>



				<div>
				
				
				
					<select id="theSelect">
						<option value="Anno">Anno</option>
						<option value="Sesso">Sesso</option>
						
						

					</select> <br> <br>
					<div id="categoria"></div>
					<br>
					<button class="btn btn-info" onclick='graficoApp()'>confronta</button>


				</div>
				<br> <br>
				<div class="isAnno"><canvas id="myChart"></canvas></div>

				<div id="tabella"></div>
				<br> <br>
				
				<div class="isSesso"> <canvas id="myPie"></canvas></div>
				
				
<div class="isNone" >
   <canvas id="canvas" width="600" height="400"></canvas>
</div>				
				
				</div>
				<br> <br>
				

			</div>

		</div>

	<script type="text/javascript">
	
		function getRandomColor() {
		    var letters = '0123456789ABCDEF'.split('');
		    var color = '#';
		    for (var i = 0; i < 6; i++ ) {
		        color += letters[Math.floor(Math.random() * 16)];
		    }
		    return color;
		}
		
	
		function graficoApp() {

			let myChart = document.getElementById('myChart').getContext('2d');
			// Global Options
			Chart.defaults.global.defaultFontFamily = 'Lato';
			Chart.defaults.global.defaultFontSize = 14;
			Chart.defaults.global.defaultFontColor = '#777';

			let massPopChart = new Chart(myChart, {
				type : 'bar', // bar, horizontalBar, pie, line, doughnut, radar, polarArea
				data : {
					labels : [],
					datasets : [ {
						label : 'Omicidi',
						data : [

						],

						//backgroundColor:'green',
						backgroundColor : [

						],
						borderWidth : 1,
						borderColor : '#777',
						hoverBorderWidth : 3,
						hoverBorderColor : '#000'
					}
					/*,
					{
						label : 'Permessi App per Categorie',
						data : [ 1, 3, 5, 12, 4 ],

						//backgroundColor:'green',
						backgroundColor : [ 'rgba(54, 162, 235, 0.6)',
								'rgba(54, 162, 235, 0.6)',
								'rgba(54, 162, 235, 0.6)',
								'rgba(54, 162, 235, 0.6)',
								'rgba(54, 162, 235, 0.6)',
								'rgba(54, 162, 235, 0.6)' ],
						borderWidth : 1,
						borderColor : '#777',
						hoverBorderWidth : 3,
						hoverBorderColor : '#000'
					}
					 */
					]
				},
				options : {
					// events: ['click'],
					 scales: {
         				  yAxes:[{
         					  ticks: {
         		                   beginAtZero: true}
         		               }]
           					
					},
					title : {
						display : true,
						text : 'Omicidi in America',
						fontSize : 25
					},
					legend : {
						display : true,
						position : 'right',
						labels : {
							fontColor : '#000'
						}
					},
					layout : {
						padding : {
							left : 50,
							right : 0,
							bottom : 0,
							top : 0
						}
					},
					tooltips : {
						enabled : true
					}
				}

			});
			

			let myPie = document.getElementById('myPie').getContext('2d');
			// Global Options
			

			let pieChart = new Chart(myPie, {
    						type: 'pie',
						    data: {
								labels : [],
								datasets : [ {
									label : 'Omicidi',
									data : [

									],

									//backgroundColor:'green',
									backgroundColor : [],
									borderWidth : 1,
									borderColor : '#777',
									hoverBorderWidth : 3,
									hoverBorderColor : '#000'
								}
								/*,
								{
									label : 'Permessi App per Categorie',
									data : [ 1, 3, 5, 12, 4 ],

									//backgroundColor:'green',
									backgroundColor : [ 'rgba(54, 162, 235, 0.6)',
											'rgba(54, 162, 235, 0.6)',
											'rgba(54, 162, 235, 0.6)',
											'rgba(54, 162, 235, 0.6)',
											'rgba(54, 162, 235, 0.6)',
											'rgba(54, 162, 235, 0.6)' ],
									borderWidth : 1,
									borderColor : '#777',
									hoverBorderWidth : 3,
									hoverBorderColor : '#000'
								}
								 */
								]
							},
						    options: {
						        title: {
						            display: true,
						            text: 'Pie Chart'
						          }
						        }
						});
	
								

			/*	massPopChart.data.datasets[0].data.push(10);
				massPopChart.data.datasets[0].backgroundColor.push('rgba(255, 206, 86, 0.6)');
				massPopChart.data.labels.push("prova");
				massPopChart.update();
			 */
			 
			 var canvas = document.getElementById('canvas');
			 var ctx = canvas.getContext('2d');
			 
			 console.log(canvas);
			 console.log(ctx);


			 var myChart3 = new Chart(ctx, {
					type : 'bar', // bar, horizontalBar, pie, line, doughnut, radar, polarArea
					data : {
						labels : [],
						datasets : [ {
							label : 'Omicidi',
							data : [

							],

							//backgroundColor:'green',
							backgroundColor : [

							],
							borderWidth : 1,
							borderColor : '#777',
							hoverBorderWidth : 3,
							hoverBorderColor : '#000'
						}
						,
						{
							label : 'Omicdi dal 1980 al 2014',
							data : [ 1, 3, 5, 12, 4 ],

							//backgroundColor:'green',
							backgroundColor : [ 'rgba(54, 162, 235, 0.6)',
									'rgba(54, 162, 235, 0.6)',
									'rgba(54, 162, 235, 0.6)',
									'rgba(54, 162, 235, 0.6)',
									'rgba(54, 162, 235, 0.6)',
									'rgba(54, 162, 235, 0.6)' ],
							borderWidth : 1,
							borderColor : '#777',
							hoverBorderWidth : 3,
							hoverBorderColor : '#000'
						}
						 
						]
					},
					options : {
						// events: ['click'],
						 scales: {
	         				  yAxes:[{
	         					  ticks: {
	         		                   beginAtZero: true}
	         		               }]
	           					
						},
						title : {
							display : true,
							text : 'Omicidi in America',
							fontSize : 25
						},
						legend : {
							display : true,
							position : 'right',
							labels : {
								fontColor : '#000'
							}
						},
						layout : {
							padding : {
								left : 50,
								right : 0,
								bottom : 0,
								top : 0
							}
						},
						tooltips : {
							enabled : true
						}
					}

				});
			 
				
		
			 

		$(document).ready(function() {
		
			$.get("ShowGraphic", function(data, status) {
				perm(data);
			});

		});

		function perm(data) {
			var i = 0;

			var d = JSON.parse(data);
		
				for (i = 0; i < d.length; i++) {
					
					let currColor=getRandomColor()
					
					
					
					massPopChart.data.datasets[0].data.push(d[i].y);
					massPopChart.data.datasets[0].backgroundColor.push(currColor);
					massPopChart.data.labels.push(d[i].x);
					
					pieChart.data.datasets[0].data.push(d[i].y);
					pieChart.data.datasets[0].backgroundColor.push(currColor);
					pieChart.data.labels.push(d[i].x);

					myChart3.data.datasets[0].data.push(d[i].y);
					myChart3.data.datasets[0].backgroundColor.push(currColor);
					myChart3.data.labels.push(d[i].x);
					
					myChart3.data.datasets[1].data.push(d[i].y);
					myChart3.data.datasets[1].backgroundColor.push(currColor);
					myChart3.data.labels.push(d[i].x);

					
				}

				// massPopChart.data.datasets[0].data.push(0);
				 massPopChart.update();
				 pieChart.update();
				 myChart3.update();
			
			document.getElementById("tabella").innerHTML = str;
		}
		
		
		
		
		}
	</script>
</body>
</html>